
@{
    ViewBag.Title = "DashBoard";
}

<div class="content-wrap">
    <div class="main controls">
        <div class="container-fluid">
            <div class="main-content">
                <div class="row">
                    <ng-view></ng-view>
                </div>
            </div>
        </div>
    </div>
</div>
<script type='text/javascript'>
    var gcm = window.GuestCheckinManager;
    var pmsSession = window.PmsSession;
    function OnPropertyChange() {
        if (window.location.pathname.toLowerCase().indexOf('dashboard') < 0) return;
        gcm.ClearExistingSessionStorage();
        pmsSession.RemoveItem("propertyrooms");
        //set property id on property ddl selection
        pmsSession.SetItem("propertyid", $('#ddlGlobalProperty').val());
        gcm.Initialize();
        //angular.element('#ddlGlobalProperty').scope().init();
        angular.element('#ddlGlobalProperty').scope().loadEvents(DayPilot.Date.today());
        //angular.element('#ddlGlobalProperty').scope().update();
        //angular.element('#ddlGlobalProperty').scope().$apply();
        window.location.reload(true);
    }

   //Changes related to the Room Status change from dashboard
    var openContextMenu = function (e) {
        var pos = getPos(e);
        $('#dp-contextMenu').show();
        $("#dp-contextMenu").css({ top: pos.y - 60, left: pos.x - 230 });
    };

    function getPos(el) {
        for (var lx = 0, ly = 0;
             el != null;
             lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent);
        return { x: lx, y: ly };
    }


</script>

<script type="text/ng-template" id="Calendar.html">
    @*<div class="col-lg-12 p-r-0 p-l-0 room-filter">
        <div class="col-xs-6">
            Room Filter:
            <dropdown-multiselect model="selectedRoomTypes"
                                  options="roomTypes"></dropdown-multiselect>
        </div>
        <div class="col-xs-6">
            Room Status:
            <dropdown-multiselect model="selectedRoomStatus"
                                  options="roomStatus"></dropdown-multiselect>
        </div>
        <form ng-submit="submit()">
            <div>
                <input type="submit" id="submit" value="Apply Filters" />
            </div>
        </form>
    </div>*@
    @*<select ng-model="roomType" ng-change="changeRoomType()">
            <option value="-1">Select Room Type</option>
            <option data-ng-repeat="r in roomTypes" value="{{r.Id}}">{{r.Name}}</option>
        </select>*@
    @*<div class="col-lg-12 p-r-0 p-l-0 room-filter">
        Room Status:
        <select ng-model="roomStatus" ng-change="changeRoomStatus()">
            <option value="1">Booked</option>
            <option value="2">Available</option>
            <option value="3">Maintenance</option>
        </select>
    </div>*@
    <div class="col-lg-2 cal-left">
        <daypilot-navigator id="navigator" daypilot-config="navigatorConfig"></daypilot-navigator>
        <fieldset class="room-status-section">
            <legend>Room Status:</legend>
            <ul>
                <li><span class="yellow-c"></span>Dirty</li>
                <li><span class="red-c"></span>Out of Order</li>
                <li><span class="orange-c"></span>Maintenance</li>
                <li><span class="blue-c"></span>Available</li>
            </ul>
        </fieldset>
    </div>

    <div class="col-lg-10 p-r-0 p-l-0 cal-right">
        <div class="tab-section">
            <div class="col-lg-3 p-r-0 p-l-0 form-group">
                <input id="searchRoom" type="text" ng-keyup="filterRoom()" placeholder="Search Room..." class="form-control" name="example-input-normal">
            </div>
            <div class="col-lg-9 p-r-0">

                <div class="c-tabs">
                    @*<input id="c-tab-6" ng-click="setCalendarView('today')" name="c-tabs-2" type="radio" checked>
                    <label for="c-tab-6">Today</label>*@
                    <input id="c-tab-8" ng-click="setCalendarView('daily')" name="c-tabs-2" type="radio" checked>
                    <label for="c-tab-8">Daily</label>
                    <input id="c-tab-9" ng-click="setCalendarView('weekly')" name="c-tabs-2" type="radio">
                    <label for="c-tab-9">Weekly</label>
                    <input id="c-tab-10" ng-click="setCalendarView('monthly')" name="c-tabs-2" type="radio">
                    <label for="c-tab-10">Monthly</label>
                </div>

            </div>
        </div>
        @*<daypilot-scheduler id="dp" daypilot-config="config" daypilot-events="events"></daypilot-scheduler>*@
            <daypilot-scheduler cellwidthspec="Auto" id="scheduler" daypilot-config="schedulerConfig" daypilot-events="events"></daypilot-scheduler>
        @*<div>
                New event:
                <button ng-click="add()">Add</button>
            </div>
            <div>
                First event:
                <button ng-click="move()">Move</button>
                <button ng-click="rename()">Rename</button>
            </div>
            <div>
                Object:
                <button ng-click="message()">Show Message</button>
            </div>
            <div>
                Events array (debug):
                <div ng-repeat="item in events">
                    {{item}}
                </div>
            </div>*@

        <div id="dp-contextMenu" style="display:none">
            <input type="radio" value="outoforder" />Out Of Order<br />
            <input type="radio" value="dirty" />Dirty<br />
            <input type="radio" value="maintenance" />Maintenance<br />
            <input type="radio" value="available" />Available<br />
        </div>

    </div>

    <div>
        <script type="text/ng-template" id="messageModalContent.html">
            <div class="modal-header">
                <h3 class="modal-title">{{modalMessage}}</h3>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <span class="loader-img"></span>
                </div>
            </div>
</script>
    </div>
</script>
